"use strict";class Color{constructor(e,a=e,b=a,c=1,d=ColorType.RGB){if(this.type=d,this.type===ColorType.RGB)this.r=e,this.g=a,this.b=b,this.a=c;else if(this.type===ColorType.HSL)this.h=e,this.s=a,this.l=b,this.a=c;else return"The type isn't defined !",new Color(255)}toString(){if(this.type===ColorType.RGB)return"rgba("+this.r+","+this.g+","+this.b+", "+this.a+")";return this.type===ColorType.HSL?"hsla("+this.h+","+this.s+"%,"+this.l+"%,"+this.a+")":void 0}static rgb(a,c=a,d=c){return Color.rgba(a,c,d)}static hsl(a,b=100,c=100){return Color.hsla(a,b,c,1)}static rgba(c,d=c,e=d,b=1){return new Color(c,d,e,b)}static hsla(b,c=100,d=100,e=1){return new Color(b,c,d,e,ColorType.HSL)}}let ColorType={RGB:"rgb",HSL:"hsl"};function resetTransform(a=targetContext){setTransform(1,0,0,1,0,0,a)}function setTransform(a,b,c,d,e,f,g=targetContext){g.setTransform(a,b,c,d,e,f)}function translate(a,b,c=targetContext){c.translate(a,b)}function rotate(a,b=targetContext){b.rotate(a)}function scale(a,b,c=targetContext){c.scale(a,b)}function save(a=targetContext){a.save()}function restore(a=targetContext){a.restore()}function foreachImageData(a,b,c=!0){foreachImageDataRect(0,0,a.width,a.height,a,b,c)}function mapImageData(a,b,c=!0){return mapImageDataRect(0,0,a.width,a.height,a,b,c)}function foreachImageDataRect(a,b,c,d,e,f,g=!0){g?mapImageDataRect(a,b,c,d,e,(a,b,c)=>(f(a,b,c),a),g):mapImageDataRect(a,b,c,d,e,(a,b,c)=>(f(a,b,c),a),g)}function mapImageDataRect(a,b,c,d,e,f,g=!0){if(0>a||a+c>e.width||0>b||b+d>e.height)return error("The position and the dimensions precised don't match with imgData's dimensions.",e);if(g&&void 0===f(new Color(0),0,0)||!g&&void 0===f(new Color(0),0,0))return error("The output of func is undefined.",e);for(let h=a;h<a+c;h++)for(let a=b;a<b+d;a++)g?setPixel(h,a,e,f(getPixel(h,a,e),h,a)):setPixel(h,a,e,f(getPixel(h,a,e),getPixelIndex(h,a,e)));return e}function getPixel(a,b,c){return getPixelByIndex(getPixelIndex(a,b,c),c)}function setPixel(a,b,c,d){setPixelByIndex(getPixelIndex(a,b,c),c,d)}function setPixelByIndex(a,b,c){b.data[4*a]=c.r,b.data[4*a+1]=c.g,b.data[4*a+2]=c.b,b.data[4*a+3]=Math.floor(255*c.a)}function getPixelByIndex(a,b){return new Color(b.data[4*a],b.data[4*a+1],b.data[4*a+2],Math.floor(b.data[4*a+3]/255))}function getPixelIndex(a,b,c){return 0>a||a>=c.width?error("x has a wrong value ! ("+a+")",0):0>b||b>=c.height?error("y has a wrong value ! ("+b+")",0):b*c.width+a}function createImageData(a,b,c=targetContext){return c.createImageData(a,b,c)}function getImageData(a,b,c,d,e=targetContext){return e.getImageData(a,b,c,d)}function putImageData(a,b,c,d=targetContext){d.putImageData(a,b,c)}function fillImageData(a,b){return mapImageData(a,()=>b)}let targetContext;function setTargetContext(a){targetContext=a}function strokeWeight(a,b=targetContext){b.lineWidth=a}function border(a,b=targetContext){noFill(),stroke(a,b),rect(0,0,b.canvas.width,b.canvas.height,b)}function circle(a,b,c,d=targetContext){arc(a,b,c,0,2*Math.PI,!1,d)}function arc(a,b,c,d,e,f=!1,g=targetContext){g.beginPath(),g.arc(a,b,c,d,e),drawShape(g),g.closePath()}function rect(a,b,c,d,e=targetContext){e.beginPath(),e.rect(a,b,c,d),drawShape(e),e.closePath()}function grid(a,b,c,d){rect(a.x,a.y,d.x,d.y);for(let e=a.x+b.x;e<=a.x+d.x-1;e+=b.x)line(e,a.y,e,a.y+d.y),e+=c.x,line(e,a.y,e,a.y+d.y);for(let e=a.y+b.y;e<=a.y+d.y-1;e+=b.y)line(a.x,e,a.x+d.x,e),e+=c.y,line(a.x,e,a.x+d.x,e)}function line(a,b,c,d,e=targetContext){e.beginPath(),e.moveTo(a,b),e.lineTo(c,d),drawShape(e),e.closePath()}function drawImage(a,b,c,d=a.width,e=a.height,f,g,h,i,j=targetContext){f===void 0?j.drawImage(a,b,c,d,e):j.drawImage(a,b,c,d,e,f,g,h,i)}let isStroking=!0,isFilling=!0;function drawShape(a=targetContext){isFilling&&a.fill(),isStroking&&a.stroke()}function createRadialGradient(a,b,c,d,e,f,g=targetContext){return g.createRadialGradient(a,b,c,d,e,f,g=targetContext)}function createLinearGradient(a,b,c,d,e=targetContext){return e.createLinearGradient(a,b,c,d)}function fillGradient(a,b=targetContext){b.fillStyle=a}function strokeGradient(a,b=targetContext){b.strokeStyle=a}function fill(a,b=targetContext){a instanceof Color||(a=new Color(a)),b.fillStyle=a.toString(),isFilling=!0}function stroke(a,b=targetContext){a instanceof Color||(a=new Color(a)),b.strokeStyle=a.toString(),isStroking=!0}function background(a,b=targetContext){fill(a,b),noStroke(),rect(0,0,b.canvas.width,b.canvas.height,b)}function noFill(){isFilling=!1}function noStroke(){isStroking=!1}function lineCap(a,b=targetContext){b.lineCap=a}function lineJoin(a,b=targetContext){b.lineJoin=a}function miterLimit(a,b=targetContext){b.miterLimit=a}function lineDashOffset(a,b=targetContext){b.lineDashOffset=a}function setLineDash(a,b=targetContext){b.setLineDash(a)}function getLineDash(a=targetContext){return a.getLineDash()}const WIDTH_COEF=18/8,HEIGHT_COEF=75/48,FONTSIZE_MODE={FONTSIZE:"fontsize",WIDTH:"width",HEIGHT:"height"};function font(a,b,c=FONTSIZE_MODE.FONTSIZE,d=targetContext){c===FONTSIZE_MODE.WIDTH?a*=WIDTH_COEF:(c=FONTSIZE_MODE.HEIGHT)&&(a*=HEIGHT_COEF),d.font=a+"px "+b}function textAlign(a,b=targetContext){b.textAlign=a}function text(a,b,c,d=targetContext){isStroking&&d.strokeText(c,a,b),isFilling&&d.fillText(c,a,b)}function textFitInBox(a,b,c,d,e,f=targetContext){let g=new SimpleVector(a,b),h=new SimpleVector(c,d),i=new SimpleVector;i=h.x/e.length<h.y?getFontDimensions(5*h.x/12/e.length,FONTSIZE_MODE.WIDTH):getFontDimensions(12*h.y/24,FONTSIZE_MODE.HEIGHT),textAlign("center",f),font(i.x,"monospace",FONTSIZE_MODE.WIDTH,f),text(g.x+h.x/2,g.y+(h.y+i.y)/2,e,f)}function getFontDimensions(a,b){let c=new SimpleVector;if(b===FONTSIZE_MODE.WIDTH)c.x=a,c.y=getHeightOfChar(c.x,FONTSIZE_MODE.WIDTH);else if(b===FONTSIZE_MODE.HEIGHT)c.y=a,c.x=getWidthOfChar(c.y,FONTSIZE_MODE.HEIGHT);else if(b===FONTSIZE_MODE.FONTSIZE)c.x=getWidthOfChar(a,FONTSIZE_MODE.FONTSIZE),c.y=getHeightOfChar(a,FONTSIZE_MODE.FONTSIZE);else return error("The value entered is wrong, it's necessary to know the width, the height or the fontsize to deduce the font dimensions !",new SimpleVector(1,1));return c}function getFontSize(a,b){return b===FONTSIZE_MODE.WIDTH?a*WIDTH_COEF:b===FONTSIZE_MODE.HEIGHT?a*HEIGHT_COEF:error("The value entered is wrong, it's necessary to know the height or the width of a caractere to deduce the fontsize !",1)}function getWidthOfChar(a,b=FONTSIZE_MODE.FONTSIZE){return b===FONTSIZE_MODE.FONTSIZE?a/WIDTH_COEF:b===FONTSIZE_MODE.HEIGHT?a*HEIGHT_COEF/WIDTH_COEF:error("The value entered is wrong, it's necessary to know the fontsize or the height of a caractere to deduce its width !",1)}function getHeightOfChar(a,b=FONTSIZE_MODE.FONTSIZE){return b===FONTSIZE_MODE.FONTSIZE?a/HEIGHT_COEF:b===FONTSIZE_MODE.WIDTH?a*WIDTH_COEF/HEIGHT_COEF:error("The value entered is wrong, it's necessary to know the fontsize or the width of a caractere to deduce its height !",1)}